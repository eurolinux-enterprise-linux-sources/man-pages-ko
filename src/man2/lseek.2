'\" t
.\" Copyright (c) 1980, 1991 Regents of the University of California.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @(#)lseek.2	6.5 (Berkeley) 3/10/91
.\"
.\" Modified Fri Jul 23 22:17:00 1993 by Rik Faith <faith@cs.unc.edu>
.\" Modified 10 June 1995 by Andries Brouwer <aeb@cwi.nl>
.\" Modified Thu Oct 31 15:18:33 1996 by Eric S. Raymond <esr@thyrsus.com>
.\" Modified Sat Jan 17 13:00:32 MET 1998 by Michael Haardt <michael@cantor.informatik.rwth-aachen.de>
.\"
.TH LSEEK 2 "1998년 1월 17" "Linux" "시스템 콜들"
.SH 이름
lseek \- 읽기/쓰기 파일 변위(offset)을 재배치한다.
.SH 사용법
.B #include <sys/types.h>
.br
.B #include <unistd.h>
.sp
.BI "off_t lseek(int " fildes ", off_t " offset ", int " whence );
.SH 설명
.B lseek
함수는 파일 기술자
.I fildes
의 변위를 다음과 같이 지시어
.I whence
에 따라 인자
.I offset
으로 재배치한다:
.TP
.B SEEK_SET
변위은 
.I offset
바이트로 설정한다.
.TP
.B SEEK_CUR
변위는 현재 위치 더하기 
.I offset
바이트로 설정한다.
.TP
.B SEEK_END
변위는 파일 크기 더하기
.I offset
바이트로 설정한다.
.PP
.B lseek
함수는 파일의 변위를 파일의 끝에 존재하는 끝 넘어로 설정할수 있다.
만일 데이터가 이 시점에서 나중에 쓰여진다면, 그 사이에 연속적으로 읽은 
데이터는 0 바이트들을 반환한다.(데이터가 실제로 그 사이에 쓰여질때까지. )
.SH 반환값
성공시, 
.B lseek
는 파일 시작에서 바이트로 측정된 것처럼 결과 변위 위치를 반환한다.
그렇지 않으면,  (off_t)\-1 의 값이 반환되며 
.I errno
는 에러를 가리키도록 설정된다.
.SH 에러
.TP
.B EBADF
.I Fildes
가 열려진 파일 기술자가 아니다.
.TP
.B ESPIPE
.I Fildes
가 pipe, socket 또는 FIFO와 관련되어 있다.
.TP
.B EINVAL
.I Whence
가 적당한 값이 아니다.
.SH 호환
SVr4, POSIX, BSD 4.3
.SH RESTRICTIONS
몇몇 장치들은 이동이 불가능하며 POSIX는 지원되어야 하는 장치들을 지정하지
않았다.

리눅스 특정 제한들: tty 장치에서 \fBlseek\fP의 사용은 \fBESPIPE\fP 를
반환한다. 다른 시스템들은 쓰여진 문자수를 반환하며 SEEK_SET을 카운터로 설정하여 사용한다.
몇몇 장치들, 즉 \fB/dev/null\fP 는 \fBESPIPE\fP 에러를 야기하지 않지만
값이 정의되지 않은 포인터를 반환한다.

.SH 주의
.I whence
의 문서 사용은 잘못된 영어이지만, 역사적 이유때문에 유지된다.
예전 코드로 바꿀때, \fIwhence\fP 값들을 다음 매크로로 대신해라:

.PP
.TS
c c
l l.
old	new
0	SEEK_SET
1	SEEK_CUR
2	SEEK_END
L_SET	SEEK_SET
L_INCR	SEEK_CUR
L_XTND	SEEK_END
.TE
.PP

SVR1-3 는 \fBoff_t\fP 대신에 \fBlong\fP 를 반환하며, 
BSD 는 \fBint\fP 를 반환한다.
.SH 관련 항목
.BR dup (2),
.BR open (2),
.BR fseek (3)
.SH 역자
정강훈 <skyeyes@soback.kornet.net>, 2000년 9월 16일
