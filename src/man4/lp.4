'\" t
.\" Copyright (c) Michael Haardt (michael@cantor.informatik.rwth-aachen.de), Sun Jan 15 19:16:33 1995
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified, Sun Feb 26 15:02:58 1995, faith@cs.unc.edu
.\"
.\" 한국어 번역 : ASPLINUX<man@asp-linux.co.kr>    2000년 7월 29일
.\"
.TH LP 4 "January 15, 1995" "" "Special files"
.SH NAME
lp \- 라인 프린터 장치
.SH SYNOPSIS
.B #include <linux/lp.h>
.SH CONFIGURATION
\fBlp\fP[0\(en2) 는 병렬 프린터를 위한 문자 장치이다;
메이저 넘버 6과 마이너 넘버 0\(en2를 가지고 있다. 마이너 넘버는
프린터 포트 기초 어드래스0x03bc, 0x0378와 0x0278에 대응한다.
보통 모드 220을 가지고 있으며 root과 그룹 lp에 속한다. 프린터 포트는
풀링이나 인터럽트 둘 다로 사용할 수 있다. 레이저 프린터와 같이
사용량이 많은 경우 인터럽트를 권한다. 보통의 도트 프린터에는 
풀링이면 충분하다. 디폴트값은 풀링이다.
.SH DESCRIPTION
아래의
.BR ioctl (2)
신호가 지원된다:
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPTIME, int \fP\fIarg\fP\fB)\fP"
프린터 버퍼가 \fIarg\fP 로 가득 찰 듯 한 경우, 프린터를 다시 
검사하기 전에 드라이버가 멈춰 있는 시간을 설정한다. 빠른 프린터를 
가지고 있다면, 이 시간을 줄인다: 이것이 늘어나는 것보다 느린 프린터라면, 
이 시간은 수백초가 걸린다. 디폴트는 2에서 0.02초 정도 있다. 
이것은 오직 풀링 드라이버에만 영향을 준다.
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPCHAR, int \fP\fIarg\fP\fB)\fP"
프린터가 \fIarg\fP에서 문자를 받아 인쇄를 위한 준비가 끝나기를 기다리는 
동안 풀링 드라아버가 하는 busy-wait 순환의 최대 횟수를 설정한다. 
인쇄가 너무 느리면, 이 숫자를 올려본다: 시스템이 지나치게 느리면
이 숫자를 줄여본다. 디폴트값은 1000이다. 풀링 드라이버에만 적용된다.
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPABORT, int \fP\fIarg\fP\fB)\fP"
\fIarg\fP가 0이면, 프린터 드라이버는 에러를 다시 확인하고, 그렇지 않으면 멈춘다. 
디폴트 값은 0이다
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPABORTOPEN, int \fP\fIarg\fP\fB)\fP"
\fIarg\fP가 0이면,
.BR open (2)
은 에러로 끝내고 그렇지 않으면 에러가 무시된다. 디폴트는 무시하는 것이다.t.
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPCAREFUL, int \fP\fIarg\fP\fB)\fP"
\fIarg\fP가 0이면, 용지 없음, 오프라인, 에러 사인이 모든 쓰기를 멈추게 한다, 
혹은 무시한다. 디폴트는 무시하는 것이다.
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPWAIT, int \fP\fIarg\fP\fB)\fP"
막 쓰여진 문자를 받기 위해 프린터가 예열 되기 전까지 기다리는 
busy-wait 순환의 횟수와 예열기가 다시 꺼질 때 까지 \fIarg\fP를 
기다리는 횟수를 정한다. 설명서에서는 0.5ms로 하라고 하지만, 경험상 코드로 인한
지체만으로도 충분하다. 그래서 디폴트 값은 0이다. 
이것은 풀링이나 인터럽트 드라이브 모두에게 해당된다.
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPSETIRQ, int \fP\fIarg\fP\fB)\fP"
ioctl()은 유퍼유저의 권한이 필요하다. 이것은 새로운 IRQ를 가진 int가 필요하다.
부수적인 효과로 프린터는 리셋된다. \fIarg\fP가 0이면, 풀링 드라이버가 
사용되고 있는 것이다. 이것 역시 디폴트 값이다.
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPGETIRQ, int *\fP\fIarg\fP\fB)\fP"
현제 \fIarg\fP에서 사용하고 있는 IRQ를 저장한다.
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPGETSTATUS, int *\fP\fIarg\fP\fB)\fP"
\fIarg\fP에서 포트의 상태 값을 저장한다. 비트는 아래와 같은 뜻을 가진다.:
.sp
.TS
l l.
LP_PBUSY	inverted busy input, active high
LP_PACK	unchanged acknowledge input, active low
LP_POUTPA	unchanged out-of-paper input, active high
LP_PSELECD	unchanged selected input, active high
LP_PERRORP	unchanged error input, active low
.TE
.sp
신호의 뜻은 각자의 프린터 설명서를 참조하라.
프린터에 따라 알려지지 않은 비트가 있을 수 있음을 기억하자.
.IP "\fBint ioctl(int \fP\fIfd\fP\fB, LPRESET)\fP"
프린터를 리셋한다.  쓰이는 독립변수 없음.
.SH FILES
/dev/lp*
.SH AUTHORS
프린터 드라이버는 Jim Weigand and Linus Torvalds에 의해 쓰여졌다.
그 후 Michael K.\& Johnson에 의해 발전되었다. Nigel Gamble에 의해 
인터럽트 코드가 쓰여졌고, Alan Cox 에 의해 모듈화 되었다.
LPCAREFUL, LPABORT, LPGETSTATUS가 Chris Metcalf에 의해 첨가되었다..
.SH "SEE ALSO"
.BR mknod "(1), " chown "(1), " chmod "(1), " tunelp "(8), " lpcntl (8)
